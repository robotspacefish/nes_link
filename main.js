const btns = document.querySelectorAll('button');
const link = document.getElementById('link');
let frame = 0;
let intervalID = null;

// create boxes
for (let i = 0; i < 256; i++) {
  const box = document.createElement('div');
  box.classList.add('box');
  link.appendChild(box);
}

btns.forEach(button => {
  button.addEventListener('click', (e) => {
    const id = e.target.id;
    console.log("id:", id);
    clearInterval(intervalID);
    switch (id) {
      case 'right':
        intervalID = setInterval(drawRight, 300);
        break;
      case 'down':
        intervalID = setInterval(drawDown, 300);
        break;
      case 'start':
        console.log('canceling animation')
        clearInterval(intervalID);
    }

  })
})

const colors = [
  'white',
  'PeachPuff',
  'Green',
  'Chocolate'
]

const downFrames = [
  [
    0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0,
    0, 0, 1, 0, 2, 3, 3, 3, 3, 3, 3, 2, 0, 1, 0, 0,
    0, 0, 1, 0, 3, 3, 3, 3, 3, 3, 3, 3, 0, 1, 0, 0,
    0, 0, 1, 1, 3, 1, 2, 1, 1, 2, 1, 3, 1, 1, 0, 0,
    0, 0, 1, 1, 3, 1, 3, 1, 1, 3, 1, 3, 1, 1, 0, 0,
    0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 0, 0,
    0, 0, 0, 0, 2, 1, 1, 3, 3, 1, 1, 2, 3, 3, 0, 0,
    0, 0, 3, 3, 3, 3, 3, 1, 1, 1, 2, 2, 2, 1, 0, 0,
    0, 3, 3, 1, 3, 3, 3, 3, 2, 2, 2, 2, 2, 1, 0, 0,
    0, 3, 1, 1, 1, 3, 3, 1, 3, 3, 2, 2, 3, 0, 0, 0,
    0, 3, 3, 1, 3, 3, 3, 1, 2, 3, 3, 3, 1, 0, 0, 0,
    0, 3, 3, 1, 3, 3, 3, 1, 3, 3, 2, 2, 2, 0, 0, 0,
    0, 3, 3, 3, 3, 3, 3, 1, 2, 2, 2, 3, 0, 0, 0, 0,
    0, 0, 1, 1, 1, 1, 1, 0, 0, 3, 3, 3, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0
  ],
  [
    0, 0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0,
    0, 0, 1, 0, 2, 3, 3, 3, 3, 3, 3, 2, 0, 1, 0, 0,
    0, 0, 1, 0, 3, 3, 3, 3, 3, 3, 3, 3, 0, 1, 0, 0,
    0, 0, 1, 1, 3, 1, 2, 1, 1, 2, 1, 3, 1, 1, 0, 0,
    0, 0, 1, 1, 3, 1, 3, 1, 1, 3, 1, 3, 1, 1, 0, 0,
    0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 0, 0,
    0, 0, 0, 2, 2, 1, 1, 3, 3, 1, 1, 2, 2, 3, 0, 0,
    0, 3, 3, 3, 3, 3, 1, 1, 1, 1, 2, 2, 3, 3, 3, 0,
    3, 3, 1, 3, 3, 3, 3, 2, 2, 2, 2, 2, 1, 3, 3, 0,
    3, 1, 1, 1, 3, 3, 1, 3, 3, 2, 2, 1, 1, 1, 3, 0,
    3, 3, 1, 3, 3, 3, 1, 2, 3, 3, 3, 3, 1, 1, 1, 0,
    3, 3, 1, 3, 3, 3, 1, 3, 3, 2, 2, 2, 2, 1, 0, 0,
    3, 3, 3, 3, 3, 3, 1, 2, 2, 2, 2, 2, 0, 0, 0, 0,
    0, 1, 1, 1, 1, 1, 3, 0, 0, 3, 3, 3, 0, 0, 0, 0,
    0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0
  ]
];

const rightFrames = [
  [
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 2, 2, 2, 2, 2, 3, 3, 3, 3, 0, 0, 0, 0,
    0, 2, 2, 2, 1, 2, 2, 3, 3, 3, 3, 3, 3, 0, 0, 0,
    2, 2, 2, 2, 1, 1, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0,
    2, 0, 2, 2, 1, 1, 1, 3, 1, 1, 2, 1, 0, 0, 0, 0,
    0, 0, 2, 3, 3, 1, 1, 3, 1, 1, 3, 1, 1, 1, 0, 0,
    0, 0, 0, 3, 3, 3, 1, 1, 1, 1, 1, 1, 0, 3, 0, 0,
    0, 0, 0, 0, 2, 2, 2, 2, 1, 1, 1, 1, 0, 3, 0, 0,
    0, 0, 2, 3, 3, 2, 2, 1, 1, 1, 3, 3, 1, 3, 0, 0,
    0, 0, 3, 3, 3, 3, 3, 1, 1, 1, 2, 3, 1, 3, 0, 0,
    0, 2, 3, 3, 3, 3, 3, 1, 1, 2, 2, 3, 0, 3, 0, 0,
    0, 2, 2, 3, 3, 3, 3, 2, 2, 2, 3, 0, 0, 3, 0, 0,
    3, 3, 2, 2, 2, 2, 2, 3, 3, 3, 3, 2, 0, 3, 0, 0,
    3, 3, 3, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 0, 0, 0,
    0, 3, 3, 3, 0, 0, 0, 0, 0, 3, 3, 3, 0, 0, 0, 0
  ],
  [
    0, 0, 0, 0, 0, 2, 2, 2, 2, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 2, 2, 2, 2, 2, 3, 3, 3, 3, 0, 0, 0, 0,
    0, 2, 2, 2, 1, 2, 2, 3, 3, 3, 3, 3, 0, 0, 0, 0,
    2, 2, 2, 2, 1, 1, 3, 3, 3, 3, 3, 3, 0, 0, 0, 0,
    2, 0, 2, 2, 1, 1, 1, 3, 1, 1, 2, 1, 0, 0, 3, 0,
    0, 0, 2, 3, 3, 1, 1, 3, 1, 1, 3, 1, 1, 1, 3, 0,
    0, 0, 0, 3, 3, 3, 1, 1, 1, 1, 1, 1, 0, 0, 3, 0,
    0, 0, 0, 0, 2, 2, 2, 2, 1, 1, 1, 1, 0, 0, 3, 0,
    0, 0, 3, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 1, 3, 0,
    0, 3, 3, 3, 2, 1, 1, 1, 2, 2, 2, 3, 3, 1, 3, 0,
    0, 3, 3, 3, 3, 1, 1, 1, 2, 2, 2, 3, 3, 0, 3, 0,
    0, 3, 3, 3, 3, 1, 1, 2, 2, 2, 3, 0, 0, 0, 3, 0,
    0, 0, 2, 3, 3, 2, 2, 3, 3, 3, 3, 0, 0, 0, 3, 0,
    0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 3, 3, 3, 3, 3, 0, 0, 0, 0, 0, 0, 0

  ]
];

const drawRight = () => {
  advanceFrames(rightFrames.length);
  loopThroughFrames(rightFrames);
};

const drawDown = () => {
  advanceFrames(downFrames.length);

  loopThroughFrames(downFrames);
};

const advanceFrames = (len) => {
  frame++;
  if (frame >= len) {
    frame = 0;
  }
};

const loopThroughFrames = (frames) => {
  Array.prototype.slice.call(link.children).forEach((box, i) => {
    box.classList.add(i);
    box.style.backgroundColor = colors[frames[frame][i]];
  })
}

// start facing right
drawRight();